"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[253],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var r=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=r.createContext({}),d=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},v=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=d(a),v=o,h=c["".concat(s,".").concat(v)]||c[v]||u[v]||n;return a?r.createElement(h,i(i({ref:t},p),{},{components:a})):r.createElement(h,i({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,i=new Array(n);i[0]=v;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<n;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}v.displayName="MDXCreateElement"},434:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>d});var r=a(7462),o=(a(7294),a(3905));a(4996);const n={id:"avail-backup-node",title:"How to Backup Your Avail Validator",sidebar_label:"Backup Your Validator",sidebar_position:3,description:"Learn about backup tasks for Avail validator.",keywords:["docs","avail","node","validator"],image:"https://availproject.github.io/img/avail/AvailDocs.png",slug:"avail-backup-node"},i=void 0,l={unversionedId:"validators/avail-backup-node",id:"validators/avail-backup-node",title:"How to Backup Your Avail Validator",description:"Learn about backup tasks for Avail validator.",source:"@site/docs/validators/0020-avail-backup-node.md",sourceDirName:"validators",slug:"/validators/avail-backup-node",permalink:"/validators/avail-backup-node",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/validators/0020-avail-backup-node.md",tags:[],version:"current",lastUpdatedBy:"DSalman03",lastUpdatedAt:1694064268,formattedLastUpdatedAt:"Sep 7, 2023",sidebarPosition:3,frontMatter:{id:"avail-backup-node",title:"How to Backup Your Avail Validator",sidebar_label:"Backup Your Validator",sidebar_position:3,description:"Learn about backup tasks for Avail validator.",keywords:["docs","avail","node","validator"],image:"https://availproject.github.io/img/avail/AvailDocs.png",slug:"avail-backup-node"},sidebar:"validatorsSidebar",previous:{title:"Run a Validator Node Using Docker",permalink:"/validators/validator-node/validator-docker"},next:{title:"Upgrade Your Validator",permalink:"/validators/avail-upgrade-validator-node"}},s={},d=[{value:"Validator Directories",id:"validator-directories",level:2},{value:"Re-Sync or Restore Snapshot",id:"re-sync-or-restore-snapshot",level:2},{value:"Backup Keystore",id:"backup-keystore",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(c,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"validator-directories"},"Validator Directories"),(0,o.kt)("p",null,"It is important to understand the folder structure of the Avail node. Knowing where the database and keys are stored can help manage your node more affectively."),(0,o.kt)("p",null,"The folder structure for Avail node:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u2514\u2500\u2500 chains\n    \u2514\u2500\u2500 da_testnet\n        \u2514\u2500\u2500 db\n            \u2514\u2500\u2500 full\n        \u2514\u2500\u2500 keystore\n        \u2514\u2500\u2500 network\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"--base-path")," parameter allows you to specify a custom base directory for storing Avail's data and configuration files. When you specify a directory using ",(0,o.kt)("inlineCode",{parentName:"p"},"--base-path"),",\nAvail will create the necessary folders (db, keystore, network) within that custom location. "),(0,o.kt)("p",null,"Details of the folder content:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"db: This folder contains the database files used by Avail to store blockchain state, block data, transaction history, and other related data. The database files are typically\nstored in a format optimized for efficient data retrieval and storage. The default database is RocksDB.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"keystore: The keystore folder is where the encrypted key files of the Validator are stored. When you execute ",(0,o.kt)("inlineCode",{parentName:"p"},"author_rotateKeys")," several key files are created. The output from\n",(0,o.kt)("inlineCode",{parentName:"p"},"author_rotateKeys")," provides a hex-encoded value, this value is a concatanation of the file names in the keystore folder.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"network: The network folder holds configuration files related to network connectivity and peer management. It includes information about known nodes, peer addresses, and other network-related settings. "))),(0,o.kt)("h2",{id:"re-sync-or-restore-snapshot"},"Re-Sync or Restore Snapshot"),(0,o.kt)("p",null,"To delete your DB and re-sync from genesis:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"avail purge-chain\n")),(0,o.kt)("p",null,"Should we wish to restore a DB you will need to"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Stop your node"),(0,o.kt)("li",{parentName:"ul"},"Delete the chain data"),(0,o.kt)("li",{parentName:"ul"},"Download a snapshot from another node "),(0,o.kt)("li",{parentName:"ul"},"Restore the snapshot on the DB folder")),(0,o.kt)("admonition",{title:"warp sync",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Note that the dependancy on snapshots will be less in the future as warp sync will allow a node to be up and running in a few minutes. Current Avail Testnet does not support\nwarp sync yet. Will be made available in future release.")),(0,o.kt)("h2",{id:"backup-keystore"},"Backup Keystore"),(0,o.kt)("p",null,"If the contents of the keystore from a primary node is moved to backup node that is in sync, will allow the node to carry on particpating in the concensus. However the primary node\nshould not be running anymore."),(0,o.kt)("admonition",{title:"Never run two nodes with the same keys",type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"Never run two nodes with the same keys. The node will double sign(equivocation) if you have two nodes running at the same time with the same keys.")),(0,o.kt)("p",null,"Moving keystore between servers is not the recommended approach to switch between nodes. This method should only be used in extreme occassions. Review how you can transition between nodes safely in\nthe ",(0,o.kt)("a",{parentName:"p",href:"/validators/avail-upgrade-validator-node"},"upgrading section")))}u.isMDXComponent=!0}}]);